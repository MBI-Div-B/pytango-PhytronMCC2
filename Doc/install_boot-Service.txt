1. Erstellen eines Shell-Scriptes zum Starten der Python-Devices

Wir nennen es "device-wrapper.sh".

Funktion:
--------

- exportieren der Shell-Variable "TANGO_HOST"
- testen und ggf. warten auf eine erfolgreiches Ping zum Tangohost
- das PySerialDS-Device starten
- Testen, ob es laeuft und dann
- das Achsen-Device (PhytronMcc2) starten

Ausführbar machen:
$ chmod 777 device-wrapper.sh


2. Den Bootprozess anpassen damit die Devices automatisch starten

- Erstellen einer "systemd"-Datei unter "/etc/systemd/system"

Wir nennen sie "tango_mcc.service" und sie hat diesen Inhalt:

****
[Unit]
Description=starting tango devices
Requires=network-online.target
After=network-online.target

[Service]
Type=forking
GuessMainPID=no
ExecStart=/home/pi/Tango_Devices/MCC2/device_wrapper.sh
WorkingDirectory=/home/pi/Tango_Devices/MCC2
User=pi
Restart=on-abort
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
****

$ sudo chmod +x  tango_mcc.service

Immer nach dem Aendern eines systemd-Files ausfuehren:
 
$ sudo systemctl daemon-reload 
$ sudo systemctl start tango_mcc.service

Und stoppen:

$ sudo systemctl stop tango_mcc.service
$ ps -edf

Jetzt bootfest machen:

$ sudo systemctl enable tango_mcc.service
Created symlink /etc/systemd/system/multi-user.target.wants/tango_mcc.service → /etc/systemd/system/tango_mcc.service.



